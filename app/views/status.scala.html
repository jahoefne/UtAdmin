@(loggedInUser: UtAdminUser)(implicit lang: play.api.i18n.Lang)

<script src="@routes.Assets.at("javascripts/online-players.js")"></script>

<div class="container module" id="status-module" ng-module="OnlinePlayerModule" ng-controller="OnlinePlayerModuleCtrl">

    <script src="@routes.Assets.at("javascripts/restart-handler.js")"></script>
    <link href="@routes.Assets.at("javascripts/deps/flag-icon-css/css/flag-icon.min.css")" rel="stylesheet">

    <div class="row">
        <div class="col s6 push-s3">
            <div class="card horizontal">
                <div class="card-image">
                    <img src=http://cache.www.gametracker.com/images/graphs/server_players.php?GSID=5036943&start=-1d">
                </div>
                <div class="card-stacked">
                    <div class="card-content">
                        <h6>@UtServer.name</h6>
                        <p><span class="highlight" id="player-count-span"></span></p>
                    </div>
                    <div class="card-action">
                        <a id="restartServerButton">Restart Server</a>
                        <a id="restartB3Button">Restart B3</a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="statusPanel">
        <div class="card-panel center">
            <table class="bordered highlight responsive-table status-table">
                <thead>
                    <tr>
                        <th><span us-spinner="{radius:7, width:1, length:1, position:'relative',color:'white'}" spinner-on="updating"></span></th>
                        <th>Name</th>
                        <th>Rank</th>
                        <th>Score</th>
                        <th>Ip</th>
                        <th>Online</th>
                        <th>PM</th>
                        <th>Punish</th>
                    </tr>
                </thead>

                <tbody ng:repeat="player in players" >
                    <tr>
                        <td>
                            <i class="material-icons {{player.team}}-text">label</i>
                            <span class="flag-icon flag-icon-{{player.countryCode | lowercase}} status-flag"></span>
                            <i class="material-icons green-text" ng-show="{{player.group.level}}>=40">star</i>
                            <i class="material-icons amber-text" ng-show="{{player.group.level}}>=55">star</i>
                            <i class="material-icons amber-text" ng-show="{{player.group.level}}>=80">stars</i>
                        </td>
                        <td><a href="/user?id={{player.id}}" target="_blank">{{player.name | username}}</a></td>
                        <td>{{player.group.name}}</td>
                        <td>{{player.score}}</td>
                        <td><a href="https://www.whoismyisp.org/ip/{{player.ip}}" target="_blank">{{player.ip}}</a></td>
                        <td>
                            <span class="time-stamp">{{player.joined | timeAgo}}</span>
                        </td>
                        <td>
                            <span class="waves-effect btn-flat white-text" ng-click="pm(player.serverId,player.name,player.id)">
                                <i class="material-icons">message</i>
                            </span>
                        </td>
                        <td>
                            <a class="waves-effect waves-teal btn-flat"  ng-click="punishModal(player.serverId,player.name)">
                                <i class="material-icons">pan_tool</i>
                            </a>
                        </td>
                    </tr>

                </tbody>
            </table>
        </div>
    </div>
</div>

